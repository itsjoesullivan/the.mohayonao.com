- var $ = {}
- $.lang  = "en"
- $.title = "the.mohayonao.com"
- $.desc  = null
- $.path  = ""
- $.jslist  = []
- $.csslist = []
- $.ligature = false

block config

- var rootpath = $.path.length === 0 ? "" : /^(\/[-\w]+)/.exec($.path)[0];
- var make_iconpath = function(app) { return /^https?:/.test(app.path) ? "/lib/img/icon/"+app.title.replace(/\s/g,"")+".png" : app.path+"appimage.png" };
- var desc = $.desc || $.title;

doctype 5
html(lang="#{$.lang}")
  head
    meta(charset="utf-8")
    title #{$.title}
    meta(name="description",content="#{desc}")
    meta(name="viewport",content="width=device-width, initial-scale=1.0")
    meta(property="og:title",content="#{$.title}")
    meta(property="og:url",content="http://the.mohayonao.com#{$.path}")
    meta(property="og:image",content="http://the.mohayonao.com#{rootpath}/appimage.png")
    meta(property="og:description",content="#{desc}")
    link(rel="shortcut icon", href="/favicon.ico")
    if $.ligature
      link(rel="stylesheet",href="/lib/LigatureSymbols-2.11.css")
    if $.csslist.length
      each href in $.csslist
        link(rel="stylesheet",href=href)
    else
      link(rel="stylesheet",href="/lib/layout.css")
    script(src="/lib/jquery.js")
    script(src="/lib/layout.js")
    script(src="/lib/stats.js")
    each src in $.jslist
      script(src=src)
  body
    #sidebar
      div(id="appimage")
       img(src="#{rootpath}/appimage.png")
      h1
        a(href="/") the.mohayonao.com
      each items in index
        if items.name
          h2 #{items.name.toUpperCase()}
        ul(id="app-list")
          each app in items.list
            - style = app.path === $.path ? 'list-style-image:url(/lib/list-style.gif)' : null
            li(data-media=app.media,style=style)
              a(href=app.path,title=app.title)
                span #{app.title}
      h2
        a(href="https://github.com/mohayonao/apps/tree/master/public#{$.path}",target="github") VIEW SOURCE ON GITHUB
    #content
      block content

    <script type="text/javascript">var _gaq = _gaq || [];_gaq.push(['_setAccount', 'UA-21613416-9']);_gaq.push(['_trackPageview']);(function() {var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();</script>
